<form #familyForm="ngForm" (ngSubmit)="onSubmit(familyForm)">

  <div class="field">
    <label for="familyName" class="label">Family name</label>
    <div class="control">
      <input id="familyName" type="text" class="input is-small" name="familyName" #familyName="ngModel" [ngClass]="{'is-danger':familyName.errors && familyName.touched}"
        [(ngModel)]="family.name" minlength="2" required>

      <div [ngClass]="{'is-hidden': !familyName.errors?.required || !familyName.touched}" class="help is-danger">
        Family name is required
      </div>
      <div [ngClass]="{'is-hidden': !familyName.errors?.minlength || !familyName.touched}" class="help is-danger">
        Must be at least 2 characters
      </div>
    </div>
  </div>

  <div class="field">
    <label for="familyPassword" class="label">Password</label>
    <div class="control">
      <input id="familyPassword" type="text" class="input is-small" name="familyPassword" #familyPassword="ngModel" [ngClass]="{'is-danger':familyPassword.errors && familyPassword.touched}"
        [(ngModel)]="family.password" minlength="4" required>

      <div [ngClass]="{'is-hidden': !familyPassword.errors?.required || !familyPassword.touched}" class="help is-danger">
        Password is required
      </div>
      <div [ngClass]="{'is-hidden': !familyPassword.errors?.minlength || !familyPassword.touched}" class="help is-danger">
        Must be at least 4 characters
      </div>
    </div>
  </div>

  <div class="field">
    <label for="familyAddress" class="label">Address</label>
    <div class="control">
      <input id="familyAddress" type="text" class="input is-small" name="familyAddress" #familyAddress="ngModel" [(ngModel)]="family.address">
    </div>
  </div>

  <div class="field">
    <div class="control">
      <label for="familyDay" class="checkbox">
        <input id="familyDay" name="familyDay" #familyDay="ngModel" [(ngModel)]="family.day" type="checkbox"> Invited to day
      </label>
    </div>
  </div>

  <hr>

  <div class="field is-centered">
    <div class="control">
      <button class="button is-primary is-outlined" type="button" (click)="addMember()">Add member</button>
    </div>
  </div>

  <div *ngFor="let member of membersList; let i = index">
    <h2>Member - {{ i }}</h2>

    <div class="field">
      <label for="memberName-{{i}}" class="label">Member name</label>
      <div class="control">
        <input id="memberName-{{i}}" type="text" class="input is-small" name="family.members[{{i}}].name" #family.members[i].name="ngModel"
          [(ngModel)]="family.members[i].name">
      </div>
    </div>

  </div>

  <div class="field is-grouped is-grouped-centered">
    <div class="control">
      <button class="button is-primary is-outlined" [ngClass]="{'is-loading': addFamilyLoading}" type="submit">Add</button>
    </div>
    <div class="control">
      <button class="button is-secondary is-outlined" type="button" (click)="familyForm.reset()">Cancel</button>
    </div>
  </div>

  <article class="message is-info">
    <div class="message-body">
      <pre>
        {{family | json}}
      </pre>
    </div>
  </article>


</form>